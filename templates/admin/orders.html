{% extends "admin/admin_base.html" %}
{% block content %}

<h1>üßæ –ó–∞–∫–∞–∑—ã</h1>

{% if orders %}
<table class="admin-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</th>
            <th>–°–æ—Å—Ç–∞–≤</th>
            <th>–°—É–º–º–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %}
        <tr class="status-row status-{{ order.status }}">
            <td>#{{ order.id }}</td>
            <td>
                {{ order.name }}<br>
                <small>{{ order.contact }}</small>
            </td>
            <td style="white-space: pre-line">{{ order.items }}</td>
            <td><strong>{{ order.total }} ‚Ç¨</strong></td>
            <td>
                <form method="post"
                      action="{{ url_for('update_order_status', order_id=order.id) }}">
                    <select name="status" onchange="this.form.submit()">
                        {% for key, labels in ORDER_STATUSES.items() %}
                        <option value="{{ key }}"
                                {% if order.status == key %}selected{% endif %}>
                            {{ labels[lang] }}
                        </option>
                        {% endfor %}
                    </select>
                </form>
            </td>
            <td>{{ order.created_at.strftime("%d.%m.%Y %H:%M") }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
{% endif %}

{% endblock %}
