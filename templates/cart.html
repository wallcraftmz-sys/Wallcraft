{% extends "base.html" %}
{% block content %}

<h1>Корзина</h1>

{% if cart_items %}
<div class="cart-list">

{% for item in cart_items %}
<div class="cart-item">
    <img
      src="{{ url_for('static', filename=item.product.image) }}"
      class="cart-item-image"
    >

    <div style="flex:1">
        <strong>{{ item.product.name_ru }}</strong><br>
        {{ item.product.price }} € × {{ item.qty }}
    </div>

    <div class="qty-controls">
        <a href="/update_cart/{{ item.product.id }}/minus" class="qty-btn">−</a>
        <span class="qty-number">{{ item.qty }}</span>
        <a href="/update_cart/{{ item.product.id }}/plus" class="qty-btn">+</a>
    </div>
</div>
{% endfor %}

</div>

<div class="cart-summary">
    Итого: <b>{{ "%.2f"|format(total) }} €</b>
</div>

<a href="/order" class="buy-btn full-width">Оформить заказ</a>

{% else %}
<p>Корзина пуста</p>
<a href="/catalog">Вернуться в каталог</a>
{% endif %}

{% endblock %}
