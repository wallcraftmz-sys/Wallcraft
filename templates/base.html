<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <title>Wallcraft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/style.css') }}?v=1003">

    <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body>

<header class="top-header">
    <button class="menu-btn" onclick="toggleMenu()" aria-label="Menu">â˜°</button>

    <div class="logo-center">
        <a href="/" class="logo-link">
            <img src="{{ url_for('static', filename='images/IMG_0857.jpeg') }}"
                 alt="Wallcraft logo"
                 class="logo-img">
            <span class="logo-text">Wallcraft</span>
        </a>
    </div>

    <div class="lang-switch">
        <a href="?lang=ru">RU</a> |
        <a href="?lang=lv">LV</a>
    </div>
</header>

<!-- OVERLAY -->
<div id="menuOverlay" class="menu-overlay" onclick="closeMenu()"></div>

<!-- SIDE MENU -->
<div id="sideMenu" class="side-menu">
    <a href="/" onclick="closeMenu()">ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ</a>
    <a href="/catalog" onclick="closeMenu()">ğŸ“¦ ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³</a>
    <a href="/about" onclick="closeMenu()">â„¹ï¸ Ğ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸</a>

    <hr>

    {% if session.get("user") %}
        {% if session.get("user", {}).get("role") == "admin" %}
            <a href="/dashboard" onclick="closeMenu()">ğŸ› ï¸ ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ°</a>
            <a href="/admin/orders" onclick="closeMenu()">ğŸ“‹ Ğ—Ğ°ĞºĞ°Ğ·Ñ‹</a>
        {% else %}
            <a href="/profile" onclick="closeMenu()">ğŸ‘¤ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ</a>
        {% endif %}
        <a href="/logout" onclick="closeMenu()">ğŸšª Ğ’Ñ‹Ğ¹Ñ‚Ğ¸</a>
    {% else %}
        <a href="/login" onclick="closeMenu()">ğŸ” Ğ’Ñ…Ğ¾Ğ´</a>
        <a href="/register" onclick="closeMenu()">ğŸ“ Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ</a>
    {% endif %}
</div>

<!-- ğŸ”¥ ĞšĞ›Ğ®Ğ§Ğ•Ğ’ĞĞ™ Ğ¤Ğ˜ĞšĞ¡ -->
<main class="container">
    {% block content %}{% endblock %}
</main>

<!-- CART POPUP -->
<div id="cart-popup" class="cart-popup">
    <div class="cart-popup-content">
        <p>âœ… Ğ¢Ğ¾Ğ²Ğ°Ñ€ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ</p>

        <a href="/catalog" class="popup-btn">ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸</a>
        <a href="/cart" class="popup-btn primary">ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ</a>

        <button class="close-popup" onclick="closeCartPopup()">Ã—</button>
    </div>
</div>

<!-- FLOATING CART -->
<a href="/cart" class="floating-cart">
    ğŸ›’
    <span id="cart-count">
        {{ session.get("cart", {}).values() | sum }}
    </span>
</a>

</body>
</html>
