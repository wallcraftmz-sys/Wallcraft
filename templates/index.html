{% extends "base.html" %}
{% block content %}

<h1 style="text-align:center; margin-bottom:30px;">
    {{ "Добро пожаловать в Wallcraft" if lang=="ru" else "Laipni lūdzam Wallcraft" }}
</h1>

<div class="product-grid">
{% for product in products %}
    <div class="product-card">
        {# Ссылка на страницу товара. Если маршрут product отсутствует, см. примечание ниже. #}
        <a href="{{ url_for('product', id=product.id) }}" style="color:inherit; text-decoration:none;">
            {% if product.image and product.image.startswith('http') %}
                <img src="{{ product.image }}" alt="{{ product.get('name_' + lang, product.get('name_ru')) }}">
            {% else %}
                <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.get('name_' + lang, product.get('name_ru')) }}">
            {% endif %}

            <h3>{{ product.get("name_" + lang, product.get("name_ru")) }}</h3>
        </a>

        {# Короткое описание под названием (усечённое до 120 знаков) #}
        <p style="color:#666; font-size:14px;">
            {{ product.get("description_" + lang, product.get("description_ru"))[:120] }}{% if product.get("description_" + lang, product.get("description_ru"))|length > 120 %}…{% endif %}
        </p>

        <p class="price">{{ "%.2f"|format(product.price) }} €</p>
    </div>
{% endfor %}
</div>

{% endblock %}
