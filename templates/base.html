<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
  <meta charset="UTF-8">
  <title>Wallcraft</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=9999">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">

  <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
  <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}">

  <meta property="og:title" content="Wallcraft">
  <meta property="og:description" content="–ö–∞—Ç–∞–ª–æ–≥ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤.">
  <meta property="og:image" content="{{ url_for('static', filename='images/IMG_0857.jpeg', _external=True) }}">
  <meta property="og:url" content="{{ request.url }}">
  <meta name="twitter:card" content="summary_large_image">
</head>

<body class="{{ 'is-admin' if request.path.startswith('/admin') else '' }}">

<header class="top-header">
  <button class="menu-btn" type="button" onclick="wcMenuOpen()" aria-label="Menu">‚ò∞</button>

  <div class="logo-center">
    <a href="{{ url_for('index', lang=lang) }}" class="logo-link" aria-label="Wallcraft">
      <img class="logo-img" src="{{ url_for('static', filename='images/IMG_0857.jpeg') }}" alt="Wallcraft">
      <span class="logo-text">Wallcraft</span>
    </a>
  </div>

  <div class="header-auth">
    {% if current_user.is_authenticated %}
      <a class="header-link" href="{{ url_for('profile', lang=lang) }}">–ü—Ä–æ—Ñ–∏–ª—å</a>
      <span class="header-sep">|</span>
      <a class="header-link" href="{{ url_for('logout', lang=lang) }}">–í—ã–π—Ç–∏</a>
    {% else %}
      <a class="header-link" href="{{ url_for('login', lang=lang) }}">–í–æ–π—Ç–∏</a>
      <span class="header-sep">|</span>
      <a class="header-link" href="{{ url_for('register', lang=lang) }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    {% endif %}
  </div>
</header>

<!-- OVERLAY -->
<div id="wcMenuOverlay" class="wc-overlay" onclick="wcMenuClose()"></div>

<!-- DRAWER -->
<aside id="wcMenu" class="wc-drawer wc-min" aria-hidden="true">

  <div class="wc-top">
    <div class="wc-drawer-head">
      <div class="wc-brand">
        <img class="wc-brand-logo" src="{{ url_for('static', filename='images/IMG_0857.jpeg') }}" alt="Wallcraft">
        <div class="wc-brand-title">Wallcraft</div>
      </div>
      <button class="wc-close" type="button" onclick="wcMenuClose()" aria-label="Close">‚úï</button>
    </div>

    <div class="wc-lang">
      <a href="?lang=lv" class="{{ 'active' if lang=='lv' }}">LV</a>
      <a href="?lang=ru" class="{{ 'active' if lang=='ru' }}">RU</a>
      <a href="?lang=en" class="{{ 'active' if lang=='en' }}">EN</a>
    </div>

    <div class="wc-line"></div>
  </div>

  <div class="wc-mid" role="navigation" aria-label="Menu">
    <a class="wc-link wc-catalog" href="{{ url_for('catalog', lang=lang) }}" onclick="wcMenuClose()">
      <span class="wc-ico">üõçÔ∏è</span>
      <span class="wc-txt">–ö–∞—Ç–∞–ª–æ–≥</span>
    </a>

    <div class="wc-line"></div>

    <a class="wc-link" href="{{ url_for('cart', lang=lang) }}" onclick="wcMenuClose()">
      <span class="wc-ico">üõí</span>
      <span class="wc-txt">–ö–æ—Ä–∑–∏–Ω–∞</span>
      <span class="wc-pill">{{ cart_total_items }}</span>
    </a>

    {% if current_user.is_authenticated %}
      <a class="wc-link" href="{{ url_for('profile', lang=lang) }}" onclick="wcMenuClose()">
        <span class="wc-ico">üë§</span>
        <span class="wc-txt">–ü—Ä–æ—Ñ–∏–ª—å</span>
      </a>
    {% endif %}
  </div>

  <div class="wc-bot">
    {% if current_user.is_authenticated and current_user.role == 'admin' %}
      <div class="wc-line"></div>
      <div class="wc-subtitle">–ê–¥–º–∏–Ω</div>

      <a class="wc-link" href="{{ url_for('admin_products', lang=lang) }}" onclick="wcMenuClose()">
        <span class="wc-ico">‚ûï</span><span class="wc-txt">–¢–æ–≤–∞—Ä—ã</span>
      </a>
      <a class="wc-link" href="{{ url_for('admin_orders', lang=lang) }}" onclick="wcMenuClose()">
        <span class="wc-ico">üßæ</span><span class="wc-txt">–ó–∞–∫–∞–∑—ã</span>
      </a>
    {% endif %}
  </div>

</aside>

<main class="container">
  {% block content %}{% endblock %}
</main>

{% if not request.path.startswith('/admin') %}
<a href="{{ url_for('cart', lang=lang) }}" class="cart-fab" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
  <span class="cart-fab-ico">üõí</span>
  <span id="cart-count" class="cart-badge">0</span>
</a>

<div id="cart-action-popup" class="cart-action-popup" aria-hidden="true">
  <div class="cart-action-inner">
    <span class="cart-action-text">–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É</span>
    <div class="cart-action-buttons">
      <button type="button" onclick="closeCartAction()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
      <a href="{{ url_for('cart', lang=lang) }}">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É</a>
    </div>
  </div>
</div>
{% endif %}

</body>
</html>
