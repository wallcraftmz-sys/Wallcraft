<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <title>Wallcraft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/style.css') }}?v=1003">

    <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body>

<header class="top-header">
    <button class="menu-btn" onclick="toggleMenu()" aria-label="Menu">‚ò∞</button>

    <div class="logo-center">
        <a href="/" class="logo-link">
            <img src="{{ url_for('static', filename='images/IMG_0857.jpeg') }}"
                 alt="Wallcraft logo"
                 class="logo-img">
            <span class="logo-text">Wallcraft</span>
        </a>
    </div>

    <div class="lang-switch">
    <a href="?lang=ru" class="{{ 'active' if lang == 'ru' }}">RU</a> |
    <a href="?lang=lv" class="{{ 'active' if lang == 'lv' }}">LV</a> |
    <a href="?lang=en" class="{{ 'active' if lang == 'en' }}">EN</a>
</div>
</header>

<!-- OVERLAY -->
<div id="menuOverlay" class="menu-overlay" onclick="closeMenu()"></div>

<!-- SIDE MENU -->
<div id="sideMenu" class="side-menu">
    <a href="/" onclick="closeMenu()">üè† –ì–ª–∞–≤–Ω–∞—è</a>
    <a href="/catalog" onclick="closeMenu()">üì¶ –ö–∞—Ç–∞–ª–æ–≥</a>
    <a href="/about" onclick="closeMenu()">‚ÑπÔ∏è –û –∫–æ–º–ø–∞–Ω–∏–∏</a>

    <hr>

    {% if current_user.is_authenticated %}
        {% if current_user.role == "admin" %}
            <a href="{{ url_for('admin_panel') }}">–ê–¥–º–∏–Ω</a>
        {% else %}
            <a href="/profile" onclick="closeMenu()">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
        {% endif %}
        <a href="/logout" onclick="closeMenu()">üö™ –í—ã–π—Ç–∏</a>
    {% else %}
        <a href="/login" onclick="closeMenu()">üîê –í—Ö–æ–¥</a>
        <a href="/register" onclick="closeMenu()">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    {% endif %}
</div>

<!-- üî• –ö–õ–Æ–ß–ï–í–û–ô –§–ò–ö–° -->
<main class="container">
    {% block content %}{% endblock %}
</main>

<!-- CART POPUP -->
<div id="cart-popup" class="cart-popup">
    <div class="cart-popup-content">
        <p>‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É</p>

        <a href="/catalog" class="popup-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
        <a href="/cart" class="popup-btn primary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É</a>

        <button class="close-popup" onclick="closeCartPopup()">√ó</button>
    </div>
</div>

<!-- FLOATING CART -->
<a href="{{ url_for('cart') }}" class="cart-btn">
    üõí <span id="cart-count">0</span>
</a>

</body>
</html>
